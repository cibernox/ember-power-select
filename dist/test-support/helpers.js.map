{"version":3,"file":"helpers.js","sources":["../../src/test-support/helpers.ts"],"sourcesContent":["import {\n  click,\n  fillIn,\n  triggerKeyEvent,\n  triggerEvent,\n  type Target,\n} from '@ember/test-helpers';\n/**\n * @private\n * @param {String} selector CSS3 selector of the elements to check the content\n * @param {String} text Substring that the selected element must contain\n * @returns HTMLElement The first element that maches the given selector and contains the\n *                      given text\n */\nexport function findContains(\n  selector: string,\n  text: string,\n  rootElement?: HTMLElement | Element,\n) {\n  let element = document.querySelectorAll(selector);\n  if (rootElement) {\n    element = rootElement.querySelectorAll(selector);\n  }\n  return Array.from(element).filter((e) => {\n    return (e.textContent ?? '').indexOf(text) > -1;\n  })[0];\n}\n\nexport async function nativeMouseDown(\n  selectorOrDomElement: Parameters<typeof triggerEvent>[0],\n  options?: Parameters<typeof triggerEvent>[2],\n) {\n  return triggerEvent(selectorOrDomElement, 'mousedown', options);\n}\n\nexport async function nativeMouseUp(\n  selectorOrDomElement: Parameters<typeof triggerEvent>[0],\n  options?: Parameters<typeof triggerEvent>[2],\n) {\n  return triggerEvent(selectorOrDomElement, 'mouseup', options);\n}\n\nexport async function triggerKeydown(\n  domElement: Parameters<typeof triggerKeyEvent>[0],\n  k: Parameters<typeof triggerKeyEvent>[2],\n) {\n  return triggerKeyEvent(domElement, 'keydown', k);\n}\n\nexport function typeInSearch(\n  scopeOrText: string,\n  text?: string,\n  rootElement?: HTMLElement | Element,\n) {\n  let scope = '';\n\n  if (typeof text === 'undefined') {\n    text = scopeOrText;\n  } else {\n    scope = scopeOrText;\n  }\n\n  const selectors = [\n    '.ember-power-select-search-input',\n    '.ember-power-select-search input',\n    '.ember-power-select-trigger-multiple-input',\n    'input[type=\"search\"]',\n  ]\n    .map((selector) => `${scope} ${selector}`)\n    .join(', ');\n\n  if (rootElement) {\n    const selector = rootElement.querySelector(selectors);\n    if (selector) {\n      return fillIn(selector, text);\n    }\n\n    return;\n  }\n\n  return fillIn(selectors, text);\n}\n\nexport async function clickTrigger(\n  scope?: Target | string,\n  options?: Parameters<typeof click>[1],\n) {\n  let selector = scope;\n  if (!selector || typeof scope !== 'object') {\n    selector = '.ember-power-select-trigger';\n    if (scope) {\n      selector = `${scope as string} ${selector}`;\n    }\n  }\n\n  return click(selector, options);\n}\n\nexport async function nativeTouch(\n  selectorOrDomElement: Parameters<typeof triggerEvent>[1],\n) {\n  void triggerEvent(selectorOrDomElement, 'touchstart');\n  return triggerEvent(selectorOrDomElement, 'touchend');\n}\n\nexport async function touchTrigger() {\n  return nativeTouch('.ember-power-select-trigger');\n}\n"],"names":["findContains","selector","text","rootElement","element","document","querySelectorAll","Array","from","filter","e","textContent","indexOf","nativeMouseDown","selectorOrDomElement","options","triggerEvent","nativeMouseUp","triggerKeydown","domElement","k","triggerKeyEvent","typeInSearch","scopeOrText","scope","selectors","map","join","querySelector","fillIn","clickTrigger","click","nativeTouch","touchTrigger"],"mappings":"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"}