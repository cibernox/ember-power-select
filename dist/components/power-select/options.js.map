{"version":3,"file":"options.js","sources":["../../../src/components/power-select/options.gts"],"sourcesContent":["import Component from '@glimmer/component';\nimport { modifier } from 'ember-modifier';\nimport emberPowerSelectIsGroup from '../../helpers/ember-power-select-is-group.ts';\nimport emberPowerSelectIsEqual from '../../helpers/ember-power-select-is-equal.ts';\nimport type { ComponentLike } from '@glint/template';\nimport type { PowerSelectPowerSelectGroupSignature } from './power-select-group.gts';\nimport type { GroupObject, Option, Select } from '../../types';\n\ndeclare const FastBoot: unknown;\n\nexport interface PowerSelectOptionsSignature<\n  T,\n  TExtra = unknown,\n  IsMultiple extends boolean = false,\n> {\n  Element: HTMLUListElement;\n  Args: PowerSelectOptionsArgs<T, TExtra, IsMultiple>;\n  Blocks: {\n    default: [opt: Option<T>, select: Select<T, IsMultiple>];\n  };\n}\n\ninterface PowerSelectOptionsArgs<\n  T,\n  TExtra = unknown,\n  IsMultiple extends boolean = false,\n> {\n  select: Select<T, IsMultiple>;\n  highlightOnHover?: boolean;\n  listboxId?: string;\n  groupIndex: string;\n  loadingMessage?: string;\n  options: readonly T[];\n  extra?: TExtra;\n  groupComponent?: ComponentLike<\n    PowerSelectPowerSelectGroupSignature<T, TExtra, IsMultiple>\n  >;\n  optionsComponent?: ComponentLike<\n    PowerSelectOptionsSignature<T, TExtra, IsMultiple>\n  >;\n}\n\nconst isTouchDevice = !!window && 'ontouchstart' in window;\nif (typeof FastBoot === 'undefined') {\n  (function (ElementProto) {\n    if (typeof ElementProto.matches !== 'function') {\n      // eslint-disable-next-line @typescript-eslint/no-unsafe-assignment\n      ElementProto.matches =\n        // @ts-expect-error Property 'msMatchesSelector' does not exist on type 'Element'.\n        ElementProto.msMatchesSelector ||\n        // @ts-expect-error Property 'mozMatchesSelector' does not exist on type 'Element'.\n        ElementProto.mozMatchesSelector ||\n        // eslint-disable-next-line @typescript-eslint/unbound-method\n        ElementProto.webkitMatchesSelector;\n    }\n\n    if (typeof ElementProto.closest !== 'function') {\n      ElementProto.closest = function closest(selector: string) {\n        // eslint-disable-next-line @typescript-eslint/no-this-alias\n        let element: Element | null = this;\n        while (element !== null && element.nodeType === 1) {\n          if (element.matches(selector)) {\n            return element;\n          }\n          element = element.parentNode as Element;\n        }\n        return null;\n      };\n    }\n  })(window.Element.prototype);\n}\n\nexport default class PowerSelectOptionsComponent<\n  T,\n  TExtra = unknown,\n  IsMultiple extends boolean = false,\n> extends Component<PowerSelectOptionsSignature<T, TExtra, IsMultiple>> {\n  <template>\n    {{! template-lint-disable require-context-role }}\n    <ul {{this.setupHandlers}} ...attributes>\n      {{#if @select.loading}}\n        {{#if @loadingMessage}}\n          <li\n            class=\"ember-power-select-option ember-power-select-option--loading-message\"\n            role=\"option\"\n            aria-selected={{false}}\n          >{{@loadingMessage}}</li>\n        {{/if}}\n      {{/if}}\n      {{#let @groupComponent @optionsComponent as |Group Options|}}\n        {{#each @options as |opt index|}}\n          {{#if (emberPowerSelectIsGroup opt)}}\n            {{#let (this.groupTyping opt) as |groupOpt|}}\n              <Group @group={{groupOpt}} @select={{@select}} @extra={{@extra}}>\n                <Options\n                  @options={{this.options groupOpt}}\n                  @select={{@select}}\n                  @groupIndex=\"{{@groupIndex}}{{index}}.\"\n                  @optionsComponent={{@optionsComponent}}\n                  @groupComponent={{@groupComponent}}\n                  @extra={{@extra}}\n                  role=\"presentation\"\n                  data-optgroup=\"true\"\n                  class=\"ember-power-select-options\"\n                  as |option|\n                >\n                  {{yield option @select}}\n                </Options>\n              </Group>\n            {{/let}}\n          {{else}}\n            <li\n              class=\"ember-power-select-option\"\n              id=\"{{@select.uniqueId}}-{{@groupIndex}}{{index}}\"\n              aria-selected=\"{{emberPowerSelectIsEqual opt @select.selected}}\"\n              aria-disabled={{if (this.isOptionDisabled opt) \"true\"}}\n              aria-current=\"{{emberPowerSelectIsEqual opt @select.highlighted}}\"\n              data-option-index=\"{{@groupIndex}}{{index}}\"\n              role=\"option\"\n            >\n              {{yield (this.optionTyping opt) @select}}\n            </li>\n          {{/if}}\n        {{/each}}\n      {{/let}}\n    </ul>\n  </template>\n  // extra._isTouchDevice is a workaround for test,!\n  private isTouchDevice =\n    (this.args.extra as (TExtra & { _isTouchDevice?: boolean }) | undefined)\n      ?._isTouchDevice || isTouchDevice;\n  private touchMoveEvent?: TouchEvent;\n  private mouseOverHandler: EventListener = ((\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _: MouseEvent,\n  ): void => {}) as EventListener;\n  private mouseUpHandler: EventListener = ((\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _: MouseEvent,\n  ): void => {}) as EventListener;\n  private touchEndHandler: EventListener = ((\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _: TouchEvent,\n  ): void => {}) as EventListener;\n  private touchMoveHandler: EventListener = ((\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _: TouchEvent,\n  ): void => {}) as EventListener;\n  private touchStartHandler: EventListener = ((\n    // eslint-disable-next-line @typescript-eslint/no-unused-vars\n    _: TouchEvent,\n  ): void => {}) as EventListener;\n\n  private _listElement: Element | null = null;\n  private _didHandlerSetup: boolean = false;\n\n  willDestroy(): void {\n    super.willDestroy();\n    if (this._listElement) {\n      this._removeHandlers(this._listElement);\n    }\n  }\n\n  setupHandlers = modifier((element: Element) => {\n    if (this._didHandlerSetup) {\n      return;\n    }\n    this._didHandlerSetup = true;\n    this._listElement = element;\n    this._addHandlers(element);\n  });\n\n  isOptionDisabled(option: T): boolean {\n    if (option && typeof option === 'object' && 'disabled' in option) {\n      return option.disabled as boolean;\n    }\n\n    return false;\n  }\n\n  options(group: GroupObject<T>): readonly T[] {\n    if (group && typeof group === 'object' && 'options' in group) {\n      return group.options as T[];\n    }\n\n    return [];\n  }\n\n  groupTyping(opt: T) {\n    return opt as GroupObject<T>;\n  }\n\n  optionTyping(opt: T) {\n    return opt as Option<T>;\n  }\n\n  _optionFromIndex(index: string): Option<T> {\n    const parts = index.split('.');\n    let option = this.args.options[parseInt(parts[0] ?? '', 10)];\n    for (let i = 1; i < parts.length; i++) {\n      if (\n        option &&\n        typeof option === 'object' &&\n        'options' in option &&\n        option.options\n      ) {\n        option = (option.options as T[])[parseInt(parts[i] ?? '', 10)];\n      }\n    }\n    return option as Option<T>;\n  }\n\n  _hasMoved(endEvent: TouchEvent): boolean {\n    const moveEvent = this.touchMoveEvent;\n    if (!moveEvent) {\n      return false;\n    }\n\n    if (!moveEvent.changedTouches) {\n      return false;\n    }\n\n    const changedTouch = moveEvent.changedTouches[0];\n\n    if (\n      !endEvent.changedTouches?.[0] ||\n      // @ts-expect-error Property 'touchType' does not exist on type 'Touch'.\n      changedTouch?.touchType !== 'stylus'\n    ) {\n      return true;\n    }\n\n    // Distinguish stylus scroll and tap: if touch \"distance\" < 5px, we consider it a tap\n    const horizontalDistance = Math.abs(\n      (changedTouch?.pageX ?? 0) - endEvent.changedTouches[0].pageX,\n    );\n    const verticalDistance = Math.abs(\n      (changedTouch?.pageY ?? 0) - endEvent.changedTouches[0].pageY,\n    );\n    return horizontalDistance >= 5 || verticalDistance >= 5;\n  }\n\n  private _addHandlers(element: Element) {\n    const isGroup = element.getAttribute('data-optgroup') === 'true';\n    if (isGroup) {\n      return;\n    }\n    const findOptionAndPerform = (\n      action: (selected: Option<T> | undefined, e?: Event) => void,\n      e: MouseEvent,\n    ): void => {\n      if (e.target === null) return;\n      const optionItem = (e.target as Element).closest('[data-option-index]');\n      if (!optionItem) {\n        return;\n      }\n      if (optionItem.closest('[aria-disabled=true]')) {\n        return; // Abort if the item or an ancestor is disabled\n      }\n      const optionIndex = optionItem.getAttribute('data-option-index');\n      if (optionIndex === null) return;\n      action(this._optionFromIndex(optionIndex), e);\n    };\n    this.mouseUpHandler = ((e: MouseEvent): void =>\n      findOptionAndPerform(\n        this.args.select.actions.choose,\n        e,\n      )) as EventListener;\n    element.addEventListener('mouseup', this.mouseUpHandler);\n    if (this.args.highlightOnHover) {\n      this.mouseOverHandler = ((e: MouseEvent): void =>\n        findOptionAndPerform(\n          this.args.select.actions.highlight,\n          e,\n        )) as EventListener;\n      element.addEventListener('mouseover', this.mouseOverHandler);\n    }\n    if (this.isTouchDevice) {\n      this.touchMoveHandler = ((e: TouchEvent): void => {\n        this.touchMoveEvent = e;\n        if (element) {\n          element.removeEventListener('touchmove', this.touchMoveHandler);\n        }\n      }) as EventListener;\n      // Add touch event handlers to detect taps\n      // eslint-disable-next-line @typescript-eslint/no-unused-vars\n      this.touchStartHandler = ((_: TouchEvent): void => {\n        element.addEventListener('touchmove', this.touchMoveHandler);\n      }) as EventListener;\n      this.touchEndHandler = ((e: TouchEvent): void => {\n        if (e.target === null) return;\n        const optionItem = (e.target as Element).closest('[data-option-index]');\n        if (optionItem === null) return;\n        e.preventDefault();\n        if (this._hasMoved(e)) {\n          this.touchMoveEvent = undefined;\n          return;\n        }\n\n        if (optionItem.closest('[aria-disabled=true]')) {\n          return; // Abort if the item or an ancestor is disabled\n        }\n\n        const optionIndex = optionItem.getAttribute('data-option-index');\n        if (optionIndex === null) return;\n        this.args.select.actions.choose(this._optionFromIndex(optionIndex), e);\n      }) as EventListener;\n      element.addEventListener('touchstart', this.touchStartHandler);\n      element.addEventListener('touchend', this.touchEndHandler);\n    }\n\n    this.args.select.actions.scrollTo(this.args.select.highlighted);\n  }\n\n  private _removeHandlers(element: Element) {\n    element.removeEventListener('mouseup', this.mouseUpHandler);\n    element.removeEventListener('mouseover', this.mouseOverHandler);\n    element.removeEventListener('touchstart', this.touchStartHandler);\n    element.removeEventListener('touchmove', this.touchMoveHandler);\n    element.removeEventListener('touchend', this.touchEndHandler);\n  }\n}\n"],"names":["isTouchDevice","window","FastBoot","ElementProto","matches","msMatchesSelector","mozMatchesSelector","webkitMatchesSelector","closest","selector","element","nodeType","parentNode","Element","prototype","PowerSelectOptionsComponent","Component","setComponentTemplate","precompileTemplate","strictMode","scope","emberPowerSelectIsGroup","emberPowerSelectIsEqual","args","extra","_isTouchDevice","touchMoveEvent","mouseOverHandler","_","mouseUpHandler","touchEndHandler","touchMoveHandler","touchStartHandler","_listElement","_didHandlerSetup","willDestroy","_removeHandlers","setupHandlers","modifier","_addHandlers","isOptionDisabled","option","disabled","options","group","groupTyping","opt","optionTyping","_optionFromIndex","index","parts","split","parseInt","i","length","_hasMoved","endEvent","moveEvent","changedTouches","changedTouch","touchType","horizontalDistance","Math","abs","pageX","verticalDistance","pageY","isGroup","getAttribute","findOptionAndPerform","action","e","target","optionItem","optionIndex","select","actions","choose","addEventListener","highlightOnHover","highlight","removeEventListener","preventDefault","undefined","scrollTo","highlighted"],"mappings":"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"}